j<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DavintoHQ Calendar</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://apis.google.com/js/api.js"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head><body onload="loadGoogleApi()">
  <div class="container">
    <h1><span class="material-icons">calendar_month</span> DavintoHQ Calendar</h1><form id="eventForm">
  <input type="text" id="eventTitle" placeholder="Event Title" required>
  <input type="datetime-local" id="eventDateTime" required>
  <button type="submit">Add Event</button>
</form>

<ul id="eventList"></ul>

  </div>  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
    import { getFirestore, collection, addDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyAx0q_QGU35tLFP4MtUMQQUtw-WVNagpHk",
      authDomain: "izuchukwu-foods.firebaseapp.com",
      projectId: "izuchukwu-foods",
      storageBucket: "izuchukwu-foods.firebasestorage.app",
      messagingSenderId: "811147638426",
      appId: "1:811147638426:web:f2403b6cf7e0b6f19b1123"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const eventForm = document.getElementById('eventForm');
    const eventList = document.getElementById('eventList');

    eventForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const title = document.getElementById('eventTitle').value;
      const datetime = document.getElementById('eventDateTime').value;

      await addDoc(collection(db, 'calendarEvents'), { title, datetime });
      addToGoogleCalendar(title, datetime);
      eventForm.reset();
    });

    onSnapshot(collection(db, 'calendarEvents'), (snapshot) => {
      eventList.innerHTML = '';
      snapshot.forEach(doc => {
        const event = doc.data();
        const li = document.createElement('li');
        li.innerHTML = `<strong>${event.title}</strong> <br> ${new Date(event.datetime).toLocaleString()}`;
        eventList.appendChild(li);
      });
    });
  </script>  <script>
    const CLIENT_ID = '1051221287063-dl1ag2bdea9dojk6pvllfokccdqo7fmv.apps.googleusercontent.com';
    const SCOPES = 'https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/calendar.events';

    function loadGoogleApi() {
      gapi.load('client:auth2', initClient);
    }

    function initClient() {
      gapi.client.init({
        clientId: CLIENT_ID,
        scope: SCOPES,
      }).then(() => {
        const isSignedIn = gapi.auth2.getAuthInstance().isSignedIn.get();
        updateSigninStatus(isSignedIn);
        gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
      });
    }

    function updateSigninStatus(isSignedIn) {
      if (!isSignedIn) gapi.auth2.getAuthInstance().signIn();
    }

    function addToGoogleCalendar(title, datetime) {
      const event = {
        summary: title,
        start: {
          dateTime: new Date(datetime).toISOString(),
          timeZone: 'Africa/Lagos',
        },
        end: {
          dateTime: new Date(new Date(datetime).getTime() + 60 * 60 * 1000).toISOString(),
          timeZone: 'Africa/Lagos',
        },
      };

      gapi.client.calendar.events.insert({
        calendarId: 'primary',
        resource: event,
      }).then(response => {
        console.log('Added to Google Calendar:', response);
      }, err => {
        console.error('Error adding to calendar:', err);
      });
    }
  </script></body></html>